{% extends 'Dashboard/base_dashboard.html' %}
{% load static %}

{% block title %}Seleccionar Grupo - Agenda Virtual Eiwa{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/groups.css' %}">
{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Selecciona un Grupo</h1>
    <p>Elige el grupo del cual quieres ver las tareas</p>
</div>

{% if user_groups %}
<div class="groups-grid">
    {% for membership in user_groups %}
    <a href="{% url 'group_tasks' membership.group.id %}" class="group-card">
        <div class="group-card-header">
            <h3>{{ membership.group.name }}</h3>
            <span class="role-badge role-{{ membership.role }}">
                {% if membership.role == 'leader' %}Líder
                {% elif membership.role == 'co_leader' %}Co-Líder
                {% else %}Miembro{% endif %}
            </span>
        </div>
        {% if membership.group.description %}
        <p class="group-card-description">{{ membership.group.description }}</p>
        {% endif %}
        <div class="group-card-footer">
            <span class="group-stat">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                {{ membership.group.members.count }} miembros
            </span>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="empty-state-card">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="9" cy="7" r="4"></circle>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
    </svg>
    <h3>No tienes grupos</h3>
    <p>Únete o crea un grupo para comenzar a gestionar tareas</p>
    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 20px;">
        <a href="{% url 'create_group' %}" class="btn btn-primary">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            Crear Grupo
        </a>
        <a href="{% url 'join_group' %}" class="btn btn-secondary">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="8.5" cy="7" r="4"></circle>
                <line x1="20" y1="8" x2="20" y2="14"></line>
                <line x1="23" y1="11" x2="17" y2="11"></line>
            </svg>
            Unirse a Grupo
        </a>
    </div>
</div>
{% endif %}
{% endblock %}
